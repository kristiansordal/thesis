\chapter{Results} \label{results}

\section{Theoretical Maximum}
As has been established, the maximum performance scales with the available memory bandwidth of the system, and not with the amount of processes used. For SpMV, a total of 6 bytes are read per FLOP, which means that the theoretical maximum is given by \ref{eq:theoretical_max}. This is under the assumption that all resources on the system is dedicated to the SpMV operation, which is not the case in reality. At most, somewhere in the neighbourhood of 80\% of the systems resources can be expected to be utilized.

\begin{equation}
\text{Maximum Theoretical Performance} = \frac{\text{Memory bandwidth}}{6}
\label{eq:theoretical_max}
\end{equation}


\section{Matrices}
For the results presented in the following sections, the matrices shown in Figure \ref{fig:matricesused} were selected as they are in general well-structure and symmetrical. 

\begin{figure}[H]
  \centering
  \captionsetup[sub]{font=tiny, textfont=tiny}
  \setlength{\tabcolsep}{4pt} % adjust horizontal padding between columns
  \begin{tabular}{cccc}
      \subcaptionbox{\tiny{bone010}\label{fig:bone010}}{%
      \includegraphics[width=0.23\textwidth]{bone010.png}%
    } &
    \subcaptionbox{\tiny{af\_shell10}\label{fig:af_shell10}}{%
      \includegraphics[width=0.23\textwidth]{af_shell10.png}%
    } &
    \subcaptionbox{\tiny{Serena}\label{fig:Serena}}{%
      \includegraphics[width=0.23\textwidth]{Serena.png}%
    } &
    \subcaptionbox{\tiny{Long\_Coup\_dt0}\label{fig:Long_Coup_dt0}}{%
      \includegraphics[width=0.23\textwidth]{Long_Coup_dt0.png}%
    } \\[6pt] % a little extra vertical gap
    \subcaptionbox{\tiny{dielFilterV3real}\label{fig:dielFilterV3real}}{%
      \includegraphics[width=0.23\textwidth]{dielFilterV3real.png}%
    } &
    \subcaptionbox{\tiny{Cube\_Coup\_dt0}\label{fig:Cube_Coup_dt0_1}}{%
      \includegraphics[width=0.23\textwidth]{Cube_Coup_dt0.png}%
    } &
    \subcaptionbox{\tiny{Bump\_2911}\label{fig:Bump_2911}}{%
      \includegraphics[width=0.23\textwidth]{Bump_2911.png}%
    } &
    \subcaptionbox{\tiny{nlpkkt200}\label{fig:nlpkkt200}}{%
      \includegraphics[width=0.23\textwidth]{nlpkkt200.png}%
    }
  \end{tabular}
  \caption{Matrices used to generate results.}
  \label{fig:matricesused}
\end{figure}

\begin{table}[H]
\begin{center}
\begin{tabular}[c]{|l|l|}
\hline
\textbf{Name}&\textbf{Purpose}  \\
\hline
bone010&Trabecular Bone Micro-Finite Element Model\\
\hline
af\_shell1&Sheet metal forming matrix\\
\hline
Serena&Gas reservoir simulation for \(CO_{2}\) sequestration\\
\hline
Long\_Coup\_dt0&3D coupled consolidation problem (geological formation)\\
\hline
dielFilterV3real&High-order vector finite element method in EM\\
\hline
Cube\_Coup\_dt0&3D coupled consolidation problem (3D cube)\\
\hline
Bump\_2911&3D geomechanical reservoir simulation\\
\hline
nlpkkt200&Symmetric indefinite KKT matrix\\
\end{tabular}
\end{center}
\end{table}

All programs have been compiled with \texttt{-march=native} and \texttt{-O3} compilation flags.

\section{Single Node Performance - \defq}
The following results illustrate the communication volume as a percentage of the total number of elements in the \(x\) vector for the given matrix per iteration of SpMV. Each plot shows three communication strategies, these being the \textit{Exchange Separators}, \textit{Exchange required separators} and \textit{Exchange required elements} strategies, respectively. Results for the \textit{Exchange entire vector} communication strategy have been left out, as the communication volume remains constant at 100\% for all entries. Furthermore, the plots show three entries per communication strategy, in order to illustrate the communication volume of the rank that communicates the maximum of all ranks, the minimum of all ranks, and the average across all ranks.
\medskip

\subsection{Communication Volume}

\begin{figure}[H]
    \title{Serena}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Serena_commload_single_defq.png }
    \end{center}
    \caption{Serena}
    \label{fig:Serena_commload_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{bone010}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{bone010_commload_single_defq.png}
    \end{center}
    \caption{bone010}
    \label{fig:bone010_commload_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{Bump\_2911}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Bump\_2911_commload_single_defq.png}
    \end{center}
    \caption{Bump\_2911}
    \label{fig:Bump_2911_defq_commload_single.png}
\end{figure}

\begin{figure}[H]
    \title{Cube\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Cube_Coup_dt0_commload_single_defq.png}
    \end{center}
    \caption{Cube\_Coup\_dt0}
    \label{fig:Cube_Coup_dt0_commload_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{Long\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Long_Coup_dt0_commload_single_defq.png}
    \end{center}
    \caption{Long\_Coup\_dt0}
    \label{fig:Long_Coup_dt0_commload_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{nlpkkt200}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{nlpkkt200_commload_single_defq.png}
    \end{center}
    \caption{nlpkkt200}
    \label{fig:nlpkkt200_defq_commload_single.png}
\end{figure}

\begin{figure}[H]
    \title{dielFilterV3real}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{dielFilterV3real_commload_single_defq.png}
    \end{center}
    \caption{dielFilterV3real}
    \label{fig:dielFilterV3real_commload_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{af\_shell10}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{af_shell10_commload_single_defq.png}
    \end{center}
    \caption{af\_shell10}
    \label{fig:af_shell10_defq_commload_single.png}
\end{figure}

\subsection{Communication Time}
The following plots illustrate the time spent communicating per iteration of SpMV.

\begin{figure}[H]
    \title{Serena}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Serena_tcomm_single_defq.png }
    \end{center}
    \caption{Serena}
    \label{fig:Serena_tcomm_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{bone010}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{bone010_tcomm_single_defq.png}
    \end{center}
    \caption{bone010}
    \label{fig:bone010_tcomm_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{Bump\_2911}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Bump\_2911_tcomm_single_defq.png}
    \end{center}
    \caption{Bump\_2911}
    \label{fig:Bump_2911_defq_tcomm_single.png}
\end{figure}

\begin{figure}[H]
    \title{Cube\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Cube_Coup_dt0_tcomm_single_defq.png}
    \end{center}
    \caption{Cube\_Coup\_dt0}
    \label{fig:Cube_Coup_dt0_tcomm_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{Long\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Long_Coup_dt0_tcomm_single_defq.png}
    \end{center}
    \caption{Long\_Coup\_dt0}
    \label{fig:Long_Coup_dt0_tcomm_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{nlpkkt200}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{nlpkkt200_tcomm_single_defq.png}
    \end{center}
    \caption{nlpkkt200}
    \label{fig:nlpkkt200_defq_tcomm_single.png}
\end{figure}

\begin{figure}[H]
    \title{dielFilterV3real}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{dielFilterV3real_tcomm_single_defq.png}
    \end{center}
    \caption{dielFilterV3real}
    \label{fig:dielFilterV3real_tcomm_single_defq.png}
\end{figure}

\begin{figure}[H]
    \title{af\_shell10}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{af_shell10_tcomm_single_defq.png}
    \end{center}
    \caption{af\_shell10}
    \label{fig:af_shell10_defq_tcomm_single.png}
\end{figure}


\subsection{Communication Volume \romeq}


\begin{figure}[H]
    \title{Serena}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Serena_commload_rome16q.png }
    \end{center}
    \caption{Serena}
    \label{fig:Serena_commload_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{bone010}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{bone010_commload_rome16q.png}
    \end{center}
    \caption{bone010}
    \label{fig:bone010_commload_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{Bump\_2911}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Bump\_2911_commload_rome16q.png}
    \end{center}
    \caption{Bump\_2911}
    \label{fig:Bump_2911_rome16q_commload_single.png}
\end{figure}

\begin{figure}[H]
    \title{Cube\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Cube_Coup_dt0_commload_rome16q.png}
    \end{center}
    \caption{Cube\_Coup\_dt0}
    \label{fig:Cube_Coup_dt0_commload_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{Long\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Long_Coup_dt0_commload_rome16q.png}
    \end{center}
    \caption{Long\_Coup\_dt0}
    \label{fig:Long_Coup_dt0_commload_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{nlpkkt200}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{nlpkkt200_commload_rome16q.png}
    \end{center}
    \caption{nlpkkt200}
    \label{fig:nlpkkt200_rome16q_commload_single.png}
\end{figure}

\begin{figure}[H]
    \title{dielFilterV3real}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{dielFilterV3real_commload_rome16q.png}
    \end{center}
    \caption{dielFilterV3real}
    \label{fig:dielFilterV3real_commload_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{af\_shell10}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{af_shell10_commload_rome16q.png}
    \end{center}
    \caption{af\_shell10}
    \label{fig:af_shell10_rome16q_commload_single.png}
\end{figure}

\subsection{Communication Time \romeq}
The following plots illustrate the time spent communicating per iteration of SpMV.

\begin{figure}[H]
    \title{Serena}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Serena_tcomm_rome16q.png }
    \end{center}
    \caption{Serena}
    \label{fig:Serena_tcomm_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{bone010}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{bone010_tcomm_rome16q.png}
    \end{center}
    \caption{bone010}
    \label{fig:bone010_tcomm_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{Bump\_2911}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Bump\_2911_tcomm_rome16q.png}
    \end{center}
    \caption{Bump\_2911}
    \label{fig:Bump_2911_rome16q_tcomm_single.png}
\end{figure}

\begin{figure}[H]
    \title{Cube\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Cube_Coup_dt0_tcomm_rome16q.png}
    \end{center}
    \caption{Cube\_Coup\_dt0}
    \label{fig:Cube_Coup_dt0_tcomm_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{Long\_Coup\_dt0}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{Long_Coup_dt0_tcomm_rome16q.png}
    \end{center}
    \caption{Long\_Coup\_dt0}
    \label{fig:Long_Coup_dt0_tcomm_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{nlpkkt200}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{nlpkkt200_tcomm_rome16q.png}
    \end{center}
    \caption{nlpkkt200}
    \label{fig:nlpkkt200_rome16q_tcomm_single.png}
\end{figure}

\begin{figure}[H]
    \title{dielFilterV3real}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{dielFilterV3real_tcomm_rome16q.png}
    \end{center}
    \caption{dielFilterV3real}
    \label{fig:dielFilterV3real_tcomm_rome16q.png}
\end{figure}

\begin{figure}[H]
    \title{af\_shell10}
    \begin{center}
        \includegraphics[width=0.95\textwidth]{af_shell10_tcomm_rome16q.png}
    \end{center}
    \caption{af\_shell10}
    \label{fig:af_shell10_tcomm_rome16q.png}
\end{figure}




\input{CPUtable}

